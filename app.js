import { broadcast } from './firebase-broadcast.js';const E=(id)=>document.getElementById(id);const S=(el,src,alt)=>{el.innerHTML=src?`<img src="${src}" alt="${alt}">`:'Nothing selected'};E('locationSelect').addEventListener('change',()=>S(E('sceneDisplay'),E('locationSelect').value,'Location'));E('characterSelect').addEventListener('change',()=>S(E('characterDisplay'),E('characterSelect').value,'Character'));E('trackSelect').addEventListener('change',()=>{const src=E('trackSelect').value;const a=E('audioPlayer');a.src=src||'';a.play().catch(()=>{});E('nowPlaying').textContent=src?src.split('/').pop():'No track';});E('broadcastBtn').addEventListener('click',()=>{broadcast({sceneName:E('locationSelect').selectedOptions[0]?.text||'',sceneImage:E('locationSelect').value||'',characterImage:E('characterSelect').value||'',music:E('trackSelect').value||''});const b=E('broadcastBtn');b.textContent='ðŸ“¡ Broadcast Sent';setTimeout(()=>b.textContent='ðŸ“¡ Broadcast to Players',1200)});const overlay=E('overlay'),body=E('sheetBody'),title=E('sheetTitle');E('closeSheet').addEventListener('click',()=>overlay.classList.add('hidden'));E('toggleScriptBtn').addEventListener('click',()=>{title.textContent='Script';body.innerHTML='<p>Script panel â€“ load your chapter script here.</p>';overlay.classList.remove('hidden')});E('toggleMovesBtn').addEventListener('click',()=>{title.textContent='MC Moves';body.innerHTML='<p>MC Moves â€“ soft & hard moves reference.</p>';overlay.classList.remove('hidden')});E('openCharMgmtBtn').addEventListener('click',()=>{title.textContent='Characters';body.innerHTML='<p>Character management â€“ add/edit NPCs.</p>';overlay.classList.remove('hidden')});